/*
 * Image Grid Animator 1.0
 * Â© The Webmen 2013
 */

(function(e){e.fn.imageGridify=function(t){var n={width:185,height:210,border:10,easing:"swing"};var t=e.extend(n,t);var r=0;var i=false;var s=110;var o=function(e){return e*t.height+(e-1)*t.border};var u=function(e){return e*t.width+(e-1)*t.border};var a=function(e,n){return e+t.border+(n*t.height+(n-1)*t.border)};var f=function(e,n){return e+t.border+(n*t.width+(n-1)*t.border)};var l=function(t){e(t).find(".inner-image-grid").css("margin-left",-1*((r-e(window).width())/2)+"px")};var c=function(t){r=0;e(t).find(".full-block").each(function(){r+=e(this).outerWidth()});e(t).find(".inner-image-grid").width(r)};var h=function(e){return typeof e!=="undefined"};var p=function(t){if(t.prop("tagName")!="UL")return;t.hide();var n=e("<div></div>").addClass("image-grid");var r=e("<div></div>").addClass("inner-image-grid");var i=e("<div></div>").addClass("grid-block full-block");var s=e("<div></div>").addClass("grid-block top-block");var o=e("<div></div>").addClass("grid-block bottom-block");var u=e("<div></div>").addClass("grid-block partial-block");e(t).children("li").each(function(){var t=i.clone();if(!e(this).children("ul").length){t.append(e(this).html()).data(e(this).data())}else{e(this).children("ul").each(function(n,r){var i;if(n==0){i=s.clone()}else{i=o.clone()}e(this).children("li").each(function(){var t=u.clone();t.append(e(this).html()).data(e(this).data());if(e(this).data("up")>0||e(this).data("right")>0||e(this).data("down")>0||e(this).data("left")>0){t.addClass("expand")}i.append(t)});t.append(i)})}if(e(this).data("up")>0||e(this).data("right")>0||e(this).data("down")>0||e(this).data("left")>0){t.addClass("expand")}r.append(t)});n.append(r);t.after(n);return n};var d=function(t){e(t).find(".expand").each(function(){var t;var n;var r=e(this).data("height")?e(this).data("height"):1;var i=e(this).data("width")?e(this).data("width"):1;t=o(r);n=u(i);var s=e(this).find("img");if(h(e(this).data("up"))){s.css("bottom","0px")}if(h(e(this).data("down"))){s.css("top","0px")}if(h(e(this).data("left"))){s.css("right","0px")}if(h(e(this).data("right"))){s.css("left","0px")}e(this).height(t);e(this).width(n)})};var v=function(n){e(n).find(".expand").hover(function(){if(i)return;var n=e(this).children("img");var r=a(e(this).height(),e(this).data("up")?e(this).data("up"):e(this).data("down"));var o=f(e(this).width(),e(this).data("right")?e(this).data("right"):e(this).data("left"));var u=n.css("top")=="0px"?-1*t.border+"px":"";var l=n.css("right")=="0px"?-1*t.border+"px":"";var c=n.css("bottom")=="0px"?-1*t.border+"px":"";var h=n.css("left")=="0px"?-1*t.border+"px":"";if(e(this).find(".revealed").length){p=e(this).find(".revealed").stop(true,true)}else{var p=e(this).clone()}p.css({position:"absolute","z-index":s,top:u,right:l,bottom:c,left:h});p.addClass("revealed");n.hide();e(this).css("overflow","visible");if(!e(this).find(".revealed").length){e(this).append(p)}i=true;p.animate({height:r,width:o},200,t.easing,function(){i=false});e(this).css("z-index",s);s++;e(this).addClass("expanded")},function(){if(e(this).hasClass("expanded")){var n=e(this).data("height")?e(this).data("height"):1;var r=e(this).data("width")?e(this).data("width"):1;var i=o(n);var s=u(r);var a=e(this).find(".revealed");a.animate({width:s,height:i},200,t.easing,function(){var t=e(this).parent();t.css("z-index",100).css("overflow","hidden");t.height(i).width(s);e(this).remove();t.find("img").show();t.removeClass("expanded")})}})};return this.each(function(){var t=p(e(this));d(t);v(t);e(window).load(function(){c(t);l(t)});e(window).resize(function(){l(t)})})}})(jQuery)
